# 镶金玫瑰商店

欢迎来到"镶金玫瑰"！这是一家魔兽世界里的小商店，但地段超好。老板叫艾利森，是个友善的人。我们出售的商品也都是高质量的。但不妙的是，随着商品逐渐接近保质期，它们的质量也不断下滑。我们用一个 IT 系统来更新库存信息。开发这个系统的程序员叫勒罗伊，**他已经不在我们公司了**。现在，你的任务就是要在这个系统中添加新的特性，以便我们可以销售新的商品。
首先，简单介绍一下我们的系统：

- 所有商品都有一个`SellIn`值，这是商品的保质期，最好在这么多天之内卖掉
- 所有商品都有一个`Quality`值，代表商品的价值

- 每过一天，所有商品的`SellIn`值和`Quality`值都减 `1`
- 商品的价值永远不会小于`0`，也永远不会超过`50`。
- 一旦过了保质期，`Quality` 就以`双倍`的速度下滑。

此外，有些特殊的商品还有自己的特性：

- normal         sellIn -1, quality -1
- Sulfuras       没有保质期的概念，质量也不会下滑。
- Aged Brie      放得越久，价值越高。
- Backstage pass 越是接近演出日，随着`SellIn`值的减少，商品价值`Quality`值反而上升, 在演出前 `10` 天，价值每天上升 `2` 点；演出前 `5` 天，价值每天上升 `3` 点。但一旦过了演出日，价值就马上变成 `0`。
- Conjured       物品的贬值速度是普通物品的`两`倍。(未实现的功能)


# 项目分析
- 逻辑复杂
- 基本0单元测试

# 重构思路
- 千万别去读屎一样的祖传代码
- 补充测试
  - 一开始不要补单元测试, 应该补充一些更高层面的测试， 测试粒度不要太细
  - 然后开始从小的变量开始 进行一步步地重构